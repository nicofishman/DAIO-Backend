generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model Artista {
    id     String   @id
    name   String
    image  String
    genres String[]

    Artist Artist[]
    @@map("artistas")
}

model Cancion {
    id          String   @id
    name        String
    preview_url String
    duration    Int
    genres      String[]
    albumId     String
    albumName   String
    albumImage  String
    artistsId   String[]

    Track Track[]
    @@map("canciones")
}

model Artist {
    artistId String
    fkUser   String
    orden    Int
    user     User     @relation(fields: [fkUser], references: [spotifyId], onDelete: Cascade)
    artista  Artista? @relation(fields: [artistId], references: [id])

    @@id([artistId, fkUser, orden])
    @@map("artistxuser")
}

model interactions {
    madeById         String
    interactedWithId String
    decision         Boolean
    timestamp        DateTime @db.Timestamp(6)
    id               Int      @default(autoincrement())

    @@id([madeById, interactedWithId, id])
}

model Track {
    trackId String
    fkUser  String
    orden   Int
    user    User     @relation(fields: [fkUser], references: [spotifyId], onDelete: Cascade)
    track   Cancion? @relation(fields: [trackId], references: [id], onDelete: Cascade)

    @@id([trackId, fkUser, orden])
    @@map("trackxuser")
}

model User {
    spotifyId   String   @id
    username    String
    description String
    avatarId    Decimal  @db.Decimal
    artists     Artist[]
    tracks      Track[]

    @@map("users")
}
